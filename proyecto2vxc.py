# -*- coding: utf-8 -*-
"""Proyecto2VXC.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1q2A1LoxwBqfxANjX6WbBG4diWAHTzlbt
"""

import cv2 as cv
import numpy as np
import argparse
import random as rng
from io import StringIO
import pandas as pd
import matplotlib.pyplot as plt
############
datosDig = np.genfromtxt('train.csv',delimiter=",")
#Pixeles
datosDig=datosDig[1:,:]
X1=datosDig[:,1:]
print("X1 DIEMNCION",np.shape(X1))

#ETIQUETAS
y=datosDig[:,0]
print("Y DIEMNCION",np.shape(y))
y[y == 0] = 10

#IMAGEN POSICION 1 DEL VECTOR y
f=X1[1,:]
j=np.reshape(f,(28,28),order='C')
print("DIEMNCION DE VECTOR DE CARASTERISTICAS",np.shape(j))
im1=np.array(j,dtype=np.uint8)
plt.subplot(1,2,1)
plt.imshow(im1,cmap='gray')
plt.title('IMAGEN POSICION 1')
#IMAGEN POSICION 9° DEL VECTOR y
f1=X1[9,:]
j1=np.reshape(f1,(28,28),order='C')
print("DIEMNCION DE VECTOR DE CARASTERISTICAS",np.shape(j1))
im11=np.array(j1,dtype=np.uint8)
plt.subplot(1,2,2)
plt.imshow(im11,cmap='gray')
plt.title('IMAGEN POSICION 10')




#IMAGEN POSICION 1 DEL VECTOR y
f=X1[1,:]
j=np.reshape(f,(28,28),order='C')
print("DIEMNCION DE VECTOR DE CARASTERISTICAS",np.shape(j))
im=np.array(j,dtype=np.uint8)
plt.subplot(2,2,1)
plt.imshow(im,cmap='gray')
plt.title('IMAGEN POSICION 1')
#IMAGEN POSICION 9° DEL VECTOR y
f1=X1[9,:]
j1=np.reshape(f1,(28,28),order='C')
print("DIEMNCION DE VECTOR DE CARASTERISTICAS",np.shape(j1))
im0=np.array(j1,dtype=np.uint8)
plt.subplot(2,2,2)
plt.imshow(im0,cmap='gray')
plt.title('IMAGEN POSICION 9')
#IMAGEN POSICION  DEL VECTOR y
f1=X1[0,:]
j1=np.reshape(f1,(28,28),order='C')
print("DIEMNCION DE VECTOR DE CARASTERISTICAS",np.shape(j1))
im1=np.array(j1,dtype=np.uint8)
plt.subplot(2,2,3)
plt.imshow(im1,cmap='gray')
plt.title('IMAGEN POSICION 0')

momentos1= cv.moments(im1)
huMoments1 = cv.HuMoments(momentos1)
print(huMoments1)
H1 = -np.sign(huMoments1)*np.log10(np.abs(huMoments1))
X_Hu=H1[:,0]
print(X_Hu)

def bucle(mat):
  mat = []
  for i in range(42000):
    f1=X1[i,:]
    j1=np.reshape(f1,(28,28),order='C')
    im1=np.array(j1,dtype=np.uint8)
    momentos1= cv.moments(im1)
    huMoments1 = cv.HuMoments(momentos1)
    H1 = -np.sign(huMoments1)*np.log10(np.abs(huMoments1))
    X_Hu=H1[:,0]
    mat.append(X_Hu)
  
  return mat

m = bucle(X1)
print("Dimension de Matriz X_Hu:")
print(np.shape(m))
print(np.array(m))


#Conjunto de prueba
im3 = cv.imread('tres.jpg')
X3 = cv.cvtColor(im3,cv.COLOR_BGR2GRAY)

im4 = cv.imread('cuatro.jpg')
X4 = cv.cvtColor(im4,cv.COLOR_BGR2GRAY)

im7 = cv.imread('siete.jpg')
X7 = cv.cvtColor(im7,cv.COLOR_BGR2GRAY)

X3_inv = 255 - X3
X4_inv = 255 - X4
X7_inv = 255 - X7

Xinv = [X3_inv,X4_inv,X7_inv ]
plt.imshow(X3_inv, cmap='gray')
#plt.imshow(im4, cmap='gray')
#plt.imshow(im7, cmap='gray')
im3h=np.array(X3_inv,dtype=np.uint8)
plt.subplot(2,2,1)
plt.imshow(im3h, cmap='gray')
plt.subplot(2,2,2)
plt.imshow(X4_inv, cmap='gray')
plt.subplot(2,2,3)
plt.imshow(X7_inv, cmap='gray')
print(im3h)

def inv(mat):
  mat = []
  for i in range(3):
    f1=Xinv[i]
    momentos1= cv.moments(f1)
    huMoments1 = cv.HuMoments(momentos1)
    H1 = -np.sign(huMoments1)*np.log10(np.abs(huMoments1))
    X_Hu=H1[:,0]
    mat.append(X_Hu)
  
  return mat
momentos3= cv.moments(X3_inv)
huMoments3 = cv.HuMoments(momentos3)
print(huMoments3)
H3 = -np.sign(huMoments3)*np.log10(np.abs(huMoments3))
X_Hu3=H3[:,0]
print(X_Hu3)


s = inv(Xinv)
print(np.shape(s))
print(np.array(s))
y = [[3],[4],[7]]
y = np.array(y)
print(y)
print(np.shape(y))
print(y[:,0])